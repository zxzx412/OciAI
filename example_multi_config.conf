# OCI AI 代理多账户配置示例
# 复制此文件为 multi_config.conf 并填写您的实际配置

[GLOBAL]
# 全局并发配置
global_max_concurrency = 100        # 全局最大并发数
queue_size = 1000                   # 请求队列大小
retry_attempts = 2                  # 重试次数
load_balance_strategy = round_robin  # 负载均衡策略: round_robin, weighted, least_connections
health_check_interval = 30s         # 健康检查间隔
request_timeout = 60s               # 请求超时时间

# API 服务配置
api_key = your_generated_api_key    # API密钥（启动时自动生成）
force_non_stream = false            # 强制非流式响应
default_max_tokens = 4000           # 默认最大token数

[MODELS]
# 模型映射配置 - 系统会自动从所有账户的OCI API获取可用模型并智能合并
# 您可以手动添加自定义映射，系统会保留这些配置并添加新发现的模型

# 示例手动配置（可选）：
# my-custom-model = xai.grok-4
# preferred-model = cohere.command-r-plus

# 注意：系统启动时会自动从所有启用账户的OCI API获取模型
# 并生成友好的模型名称映射，自动去重并合并

# 账户配置示例 - 请根据您的实际OCI账户信息修改
[ACCOUNT_1]
id = primary_account
user = ocid1.user.oc1..aaaaaaaa[您的用户OCID]
fingerprint = [您的API密钥指纹]
key_file = ./keys/account1.pem
tenancy = ocid1.tenancy.oc1..aaaaaaaa[您的租户OCID]
region = us-phoenix-1
weight = 3                          # 权重，用于加权负载均衡
max_concurrency = 30               # 单账户最大并发数
enabled = true                     # 是否启用

[ACCOUNT_2]
id = secondary_account
user = ocid1.user.oc1..bbbbbbbb[您的用户OCID]
fingerprint = [您的API密钥指纹]
key_file = ./keys/account2.pem
tenancy = ocid1.tenancy.oc1..bbbbbbbb[您的租户OCID]
region = us-chicago-1
weight = 2
max_concurrency = 20
enabled = true

[ACCOUNT_3]
id = backup_account
user = ocid1.user.oc1..cccccccc[您的用户OCID]
fingerprint = [您的API密钥指纹]
key_file = ./keys/account3.pem
tenancy = ocid1.tenancy.oc1..cccccccc[您的租户OCID]
region = eu-frankfurt-1
weight = 1
max_concurrency = 15
enabled = false                    # 可以暂时禁用某些账户

# 熔断器配置
[CIRCUIT_BREAKER]
max_failures = 5                   # 最大失败次数
reset_timeout = 60s               # 重置超时时间
failure_rate = 0.5                # 失败率阈值 (50%)
min_requests = 10                 # 最小请求数
stat_interval = 60s               # 统计间隔
half_open_max_calls = 3           # 半开状态最大调用数
